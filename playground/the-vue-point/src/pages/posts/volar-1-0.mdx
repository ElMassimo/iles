---
title: Volar 1.0 "Nika" Released!
date: 2022-10-10
author: Johnson Chu
avatar: https://avatars.githubusercontent.com/u/16279759?v=4
twitter: '@johnsoncodehk'
---

We are happy to announce that we have released v1.0 of Volar, the official IDE/TS tooling support for Vue! ğŸ‰

This major version ships with tons of improvements across the board. In addition to improving UX, performance, and package size, we also released Plugin API v1 and refactored the core code to be framework-agnostic.

æ³¨ï¼šçµå°¾é™„æœ‰ä¸­æ–‡ç‰ˆæœ¬ (There is Chinese version of this post at the end)ã€‚

---

Earlier this year in March, Vue creator Evan You started sponsoring me ([@johnsoncodehk](https://twitter.com/johnsoncodehk)) to work full-time on the development of Volar, with the goal of pushing it towards 1.0. After 7 months of hard work, we have finally achieved this goal!

There are so many updates that you most likely missed some. Below we have summarized the most significant changes from the past 7 months:

### Feature Updates

- Implemented `Goto Code` and `Highlight Selection Dom Elements` for Vite and Nuxt 3 Preview (highly recommend you try it out!)
- Implemented [Component Preview](https://github.com/johnsoncodehk/volar/discussions/1511)
- Added setting `format.initialIndent` to specify the initial indent of SFC blocks
- Implemented support for Web IDE
- No longer built-in support for `<template lang="pug">` (In v1.0 you need to install [@volar/vue-language-plugin-pug](https://www.npmjs.com/package/@volar/vue-language-plugin-pug))

### Out-of-the-Box Usage Improvements

- No longer needs `"jsx": "preserve"` by default, and also will no longer conflict with `@types/react` (unless explicitly enabled in `vueCompilerOptions.jsxTemplates`)
- Always wraps component options in `defineComponent()` or `Vue.extend` by default so that you can simply export an object literal.
- Unknown component tags is not in warning color anymore.
- TypeScript support is improved in `<template>` block for JS components
- Reduce the need to read the README for new users. Common project setup problems will be automatically detected and prompted in status bar (such as incorrectly setting `vueCompilerOptions.target`)

### UX / DX Improvements

- Takeover mode no longer shows a pop-up when enabled
- There is a new faster command to use when user needs to restart server: `Reload Project`. This command won't restart the server but will clear the cache. `Restart Vue Server` is still available to hard-reload the server.
- "Show Virtual Scripts" command is added. Check out how it works [here](https://twitter.com/johnsoncodehk/status/1577046525490126848).
- Incrementally calculate error range for old diagnostic results to prevent annoying flickering problem
- Added support for adding and switching workspaces without restarting the server
- Simplified display of name casing tool in the status bar, and also supports prop name casing conversion

### TypeScript Improvements

- vue-tsc supports `--watch`
- vue-tsc supports `--declaration --emitDeclarationOnly` to emit dts for components
- Support for `Inlay Hints`
- Support `Find File References`
- Support for [JavaScript and TypeScript Nightly](https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-next)
- Fixed `<script>` types could not be used in `<template>`
- Added `vueCompilerOptions.strictTemplates` option to support stricter template type checking for report unknown component tag and props

### Performance Improvements

- Much faster SourceMap mapping
- Implemented incremental update for `SFC AST` and `Template AST`
- Template codegen simplified to reduce the memory footprint for each Vue file
- When a Monorepo has multiple TS projects, TS SourceFile instance is reused to reduce memory usage.
- Implemented auto import cache of tsserver in LSP server to speedup autocomplete
- Implemented named pipe base cancellation token of tsserver in LSP server
- Optimized Bundle to reduce the package size, and extension startup faster

In addition, some performance issues with larger projects may be due to tsconfig including too many unneeded files, we also have a new [VSCode plugin](https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.vscode-tsconfig-helper) to check what files your tsconfig contains.

### Generic Language Server Framework

Volar core modules is now framework-agnostic, and you can use Volar to implement language servers other than Vue framework.

In this [example repo](https://github.com/johnsoncodehk/volar/tree/master/examples), we have implemented `svelte-tsc`, `svelte-langauge-server` and other examples based on svelte2tsx.

There is also a `vue-and-svelte-language-server` example, which supports both Vue and Svelte in a single Language Server, avoiding the establishment of multiple Language Servers to establish expensive TypeScript LanguageService instances. It may helpful for framework like Astro which supports multiple languages.

### VueLanguagePlugin API

Now supported `vueCompilerOptions.plugins` option to specify additional plugins to alter virtual code generation.

The codegen API of `VueLanguagePlugin` uses `muggle-string` instead of `magic-string`, `muggle-string` is still lacking major features in earlier versions, but it is decoupled from Volar so it can be developed independently, if you need to develop in `VueLanguagePlugin`, please track for https://github.com/johnsoncodehk/muggle-string update.

### LanguageServicePlugin API

You can setup plugin to `volar.config.js` to change the language server behavior, for example you can change the formatter used by `<template>` to Prettier.

We have a single repo for maintaining common plugins: https://github.com/johnsoncodehk/volar-plugins

### External Tools Support

- `@volar/vue-typescript` exposed organizeImports API for `prettier-plugin-organize-imports`
- `@volar/vue-language-core` exposed `vue-tsconfig.schema.json` for IDEs other than VSCode
- Implemented `vue-component-meta` for UI Library documentation generation

## What's Next

Volar has been developed for more than two years so far. The development cost is huge for it just a VSCode plugin at beginning, and its project scope may also frighten some people who planned to make tools for other languages, so I hope to improve the core framework in v2.0 to make it easier for other languages that need to implement tooling to take advantage of the efforts made by Volar.

In addition there are some other things planned to do:

- Documentation website
- Improve the bug report process
- Support global installation of LangaugeServicePlugin
- Bun base Language Server
- Incremental update template codegen
- Explore performance improvements in TypeScript and LSP source code

After v1.0 is released I will go back to working full time and starting some other personal projects, while continuing to work on these in my spare time.

I also want to give a big shout out to [NuxtLabs](https://nuxtjs.org/), who have been Platinum Sponsor since May, and all my other sponsors ğŸ™Œ. Your support ensures that I will be able to continue maintaining Volar after 1.0 to improve your Vue development experience!

<p align="center">
  <a href="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/sponsors.svg">
    <img src="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/sponsors.svg"/>
  </a>
</p>

Thank you for reading this blog!

---

å¾ˆé«˜èˆˆå®£å¸ƒåœ¨ä»Šå¤©å®Œæˆäº†æ‰€æœ‰ä¸»è¦åŠŸèƒ½ä¸¦ç™¼ä½ˆäº†v1.0ç‰ˆæœ¬ã€‚ğŸ‰

é€™å€‹ä¸»è¦ç‰ˆæœ¬å…¨æ–¹é¢æ”¹é€²äº†å·¥å…·ï¼Œé™¤äº†æ”¹é€² UXã€æ€§èƒ½ã€åŒ…å¤§å°ï¼Œæˆ‘å€‘é‚„ç™¼ä½ˆäº† Plugin API v1ï¼Œä»¥åŠé‡æ§‹äº†æ¶æ§‹ä½¿æ ¸å¿ƒä»£ç¢¼èˆ‡æ¡†æ¶ç„¡é—œã€‚

ä»Šå¹´åˆæˆ‘èˆ‡ Vue çš„ä½œè€… Evan é”æˆå”è­°ï¼Œä»–åœ¨ 3 æœˆé–‹å§‹è³‡åŠ©æˆ‘å…¨è·é–‹ç™¼ Volar ç›´è‡³å®Œæˆ 1.0 ç‰ˆæœ¬ï¼Œç¶“é7å€‹æœˆçš„åŠªåŠ›æˆ‘å€‘çµ‚æ–¼åšåˆ°äº†é€™å€‹ç›®æ¨™ï¼

å¦‚æœä½ æ²’æœ‰è¿½è¹¤æ¯å€‹ç‰ˆæœ¬çš„ changelogï¼Œä½ å¯èƒ½ä¸çŸ¥é“ç™¼ç”Ÿäº†ä»€éº¼ï¼Œæˆ‘æœƒç°¡å–®ç¸½çµåœ¨é€™åŠå¹´é–“å°ä½ è¼ƒæœ‰æ˜é¡¯å½±éŸ¿çš„æ›´æ”¹ï¼š

### åŠŸèƒ½æ›´æ–°

- ç‚º Vite å’Œ Nuxt 3 Preview å¯¦ç¾äº† Goto Code å’Œ Highlight Selection Dom Elementsï¼ˆéå¸¸æ¨è–¦ä½ è©¦ä¸€è©¦ï¼ï¼‰
- å¯¦ç¾äº† [Component Preview](https://github.com/johnsoncodehk/volar/discussions/1511)
- æ–°å¢ `format.initialIndent` è¨­ç½®ä»¥æŒ‡å®š SFC blocks çš„åˆå§‹ç¸®é€²
- å¯¦ç¾äº† Web IDE æ”¯æŒ
- ä¸å†å…§ç½®æ”¯æŒ `<template lang="pug">`ï¼ˆåœ¨v1.0éœ€è¦å®‰è£[@volar/vue-language-plugin-pug](https://www.npmjs.com/package/@volar/vue-language-plugin-pug)ï¼‰

### é–‹ç®±å³ç”¨æ”¹é€²

- é è¨­ä¸å†éœ€è¦ `"jsx": "preserve"`ï¼Œä¸¦ä¸”ä¸æœƒèˆ‡ `@types/react` è¡çªï¼ˆé™¤éæ˜ç¢ºå•Ÿç”¨ `vueCompilerOptions.jsxTemplates`ï¼‰
- é è¨­ç¸½æ˜¯ä»¥ `defineComponent()` åŒ…è£Component Options
- ä¸å†ä»¥è­¦å‘Šè‰²é¡¯ç¤ºæœªçŸ¥ Component Tag
- æ”¹é€² JS çµ„ä»¶ä¸­çš„ Template TypeScript æ”¯æŒ
- æ¸›å°‘å°é–±è®€ README çš„ä¾è³´ï¼Œç¾åœ¨æœƒè‡ªå‹•æª¢æ¸¬å¸¸è¦‹çš„é …ç›®è¨­ç½®å•é¡Œï¼ˆä¾‹å¦‚éŒ¯èª¤åœ°è¨­ç½® `vueCompilerOptions.target`ï¼‰ï¼Œç™¼ç¾å•é¡Œæ™‚æœƒåœ¨ç‹€æ…‹æ¬„æç¤º

### UX / DX æ”¹é€²

- å•Ÿç”¨ Takeover mode ä¸å†å½ˆå‡ºæç¤º
- æ›´å¿«çš„ "Reload Project" å‘½ä»¤ä»£æ›¿ "Restart Vue server"
- æ–°çš„ "Show Virtual Scripts" å‘½ä»¤ä»£æ›¿ "Write Virtual Files"
- å¢é‡æ›´æ–°éå»çš„è¨ºæ–·çµæœé˜²æ­¢ç…©äººçš„é–ƒçˆå•é¡Œ
- æ”¯æŒåœ¨ä¸é‡å•Ÿæœå‹™å™¨çš„æƒ…æ³ä¸‹æ·»åŠ æˆ–åˆ‡æ›å·¥ä½œå€
- ç°¡åŒ– Name casing tool åœ¨ç‹€æ…‹æ¬„çš„é¡¯ç¤ºæ–¹å¼ï¼Œä¸¦ä¸”ç¾åœ¨ä¹Ÿæ”¯æŒ Prop name casing è½‰æ›

### TypeScript æ”¹é€²

- æ”¯æŒäº† `vue-tsc --watch`
- æ”¯æŒäº† Inlay Hints
- æ”¯æŒ Find File References
- æ”¯æŒäº† [JavaScript and TypeScript Nightly](https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-next)
- è§£æ±ºäº†ç„¡æ³•åœ¨ Template å¼•ç”¨é¡å‹çš„å•é¡Œ
- æ–°å¢ `vueCompilerOptions.strictTemplates` é¸é …æ”¯æŒæ›´åš´æ ¼çš„Template type checkingï¼Œåœ¨ä½¿ç”¨æœªçŸ¥çš„Component Tagå’ŒPropsæ™‚å ±å‘ŠéŒ¯èª¤

### æ€§èƒ½æ”¹é€²

- å¤§é‡æ”¹å–„ SourceMap mapping æ€§èƒ½
- å¯¦ç¾ SFC AST å’Œ Template AST çš„å¢é‡æ›´æ–°
- ç°¡åŒ– Template ç”Ÿæˆçš„ä»£ç¢¼ä»¥é™ä½äº†æ¯å€‹ Vue æ–‡ä»¶ç”¢ç”Ÿçš„å…§å­˜ä½”ç”¨
- ç‚º Monorepo å¤šå€‹ TS project å…±ç”¨ TS SourceFile å¯¦ä¾‹
- ç§»æ¤äº† tsserver è‡ªå‹•å°å…¥çš„ç·©å­˜é‚è¼¯åŠ å¿«è‡ªå‹•å®Œæˆ
- ç§»æ¤äº† tsserver åŸºæ–¼ Named Pipe çš„ Cancellation Token å¯¦ç¾ä»¥è§£æ±ºäº† LSP è«‹æ±‚é˜»å¡
- å„ªåŒ– Bundle é™ä½åŒ…å¤§å°ï¼Œä¸¦ä¸”æ’ä»¶å•Ÿå‹•é€Ÿåº¦æ›´å¿«

å¦å¤–ä¸€äº›å¤§å‹é …ç›®çš„æ€§èƒ½å•é¡Œå¯èƒ½æ˜¯ç”±æ–¼ tsconfig åŒ…å«äº†å¤ªå¤šä¸éœ€è¦çš„æ–‡ä»¶ï¼Œæˆ‘å€‘é‚„æœ‰ä¸€å€‹æ–°çš„[VSCodeæ’ä»¶](https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.vscode-tsconfig-helper)ç”¨ä¾†æª¢æŸ¥ä½ çš„tsconfigåŒ…å«çš„æ–‡ä»¶ã€‚

### é€šç”¨çš„ Language Server æ¡†æ¶

Volar çš„æ ¸å¿ƒä»£ç¢¼ç¾åœ¨èˆ‡æ¡†æ¶ç„¡é—œï¼Œä½ å¯ä»¥ä½¿ç”¨ Volar ç‚º Vue ä»¥å¤–çš„èªè¨€å¯¦ç¾èªè¨€æœå‹™å™¨ã€‚

åœ¨ repo çš„ [examples ç›®éŒ„](https://github.com/johnsoncodehk/volar/tree/master/examples)ï¼Œæˆ‘å€‘åŸºæ–¼ `svelte2tsx` åˆ†åˆ¥å¯¦ç¾äº† `svelte-tsc`, `svelte-langauge-server` ç­‰ç­‰ç¤ºä¾‹ã€‚

ç›®éŒ„ä¸­é‚„æœ‰ä¸€å€‹ `vue-and-svelte-language-server` ç¤ºä¾‹ï¼Œåœ¨å–®å€‹ Language Server åŒæ™‚æ”¯æŒ Vue å’Œ Svelteï¼Œé¿å…å¤šå€‹ Language Server å»ºç«‹åˆ†åˆ¥å»ºç«‹æ˜‚è²´çš„ TypeScript LanguageService å¯¦ä¾‹ï¼Œå°æ–¼åƒ Astro åŒæ™‚æ”¯æŒå¤šå€‹å‰ç«¯æ¡†æ¶çš„é …ç›®å¯èƒ½å¾ˆæœ‰ç”¨ã€‚

### VueLanguagePlugin API

ç¾åœ¨æ”¯æŒ `vueCompilerOptions.plugins` é¸é …æŒ‡å®šé¡å¤– plugin ä¾†æ›´æ”¹ virtual code çš„ç”Ÿæˆæ–¹å¼ã€‚

VueLanguagePlugin çš„ codegen API ä½¿ç”¨ `muggle-string` è€Œä¸æ˜¯ `magic-string`ï¼Œ`muggle-string` ä»ç„¶æ˜¯æ—©æœŸç‰ˆæœ¬ç¼ºä¹ä¸»è¦åŠŸèƒ½ï¼Œä½†æ˜¯èˆ‡ Volar è§£è€¦å› æ­¤å¯ä»¥ç¨ç«‹ç™¼å±•ï¼Œå¦‚æœä½ éœ€è¦é–‹ç™¼ `VueLanguagePlugin` è«‹é—œæ³¨ https://github.com/johnsoncodehk/muggle-string æ›´æ–°ã€‚

### LanguageServicePlugin API

ä½ å¯ä»¥åœ¨ `volar.config.js` æ·»åŠ  plugin ä¾†æ›´æ”¹ language server çš„è¡Œç‚ºï¼Œä¾‹å¦‚å°‡ `<template>` ä½¿ç”¨çš„ formatter æ”¹ç‚º Prettierã€‚

æˆ‘å€‘æœ‰ä¸€å€‹å–®ç¨çš„ repo ç”¨ä¾†ç¶­è­·å¸¸ç”¨çš„ plugins: https://github.com/johnsoncodehk/volar-plugins

### å¤–éƒ¨å·¥å…·æ”¯æŒ

- `@volar/vue-typescript` ç‚º `prettier-plugin-organize-imports` å…¬é–‹äº† organizeImports API
- `@volar/vue-language-core` ç‚ºVSCodeä»¥å¤–çš„IDEå…¬é–‹äº† `vue-tsconfig.schema.json`
- å¯¦ç¾äº† `vue-component-meta` ç”¨æ–¼UI Libraryæ–‡æª”ç”Ÿæˆ

## What's Next

Volar è‡³ä»Šé–‹ç™¼äº†å…©å¹´å¤šæ™‚é–“ï¼Œå°æ–¼åŸæœ¬åªæ˜¯ä¸€å€‹ VSCode Plugin ä¾†èªªæŠ•å…¥çš„é–‹ç™¼æˆæœ¬æ˜¯å·¨å¤§çš„ï¼ŒåŒæ™‚å®ƒçš„é …ç›® scope ä¹Ÿå¯èƒ½åš‡æ€•ä¸€äº›åŸæœ¬æ‰“ç®—ç‚ºèªè¨€å¯¦ç¾ Tooling çš„äººï¼Œå› æ­¤æˆ‘å¸Œæœ›åœ¨ v2.0 æ”¹é€²æ ¸å¿ƒæ¡†æ¶ï¼Œè®“å…¶ä»–éœ€è¦å¯¦ç¾ Tooling çš„èªè¨€æ›´å®¹æ˜“åœ°åˆ©ç”¨ Volar æ‰€åšçš„åŠªåŠ›ã€‚

æ­¤å¤–é‚„æœ‰ä¸€äº›è¨ˆåŠƒåšçš„äº‹æƒ…ï¼š

- æ–‡æª”ç¶²ç«™
- æ”¹é€² Bug report æµç¨‹
- æ”¯æŒå…¨å±€å®‰è£ LangaugeServicePlugin
- åŸºæ–¼ Bun çš„ Language Server
- å¢é‡æ›´æ–° template codegen
- æ¢ç´¢ TypeScript å’Œ LSP æºä»£ç¢¼ä¸­çš„æ€§èƒ½æ”¹é€²

ç™¼ä½ˆv1.0ä¹‹å¾Œæˆ‘å°‡æœƒå›åˆ°å…¨è·å·¥ä½œå’Œé–‹å§‹ä¸€äº›å…¶ä»–å€‹äººé …ç›®ï¼ŒåŒæ™‚åœ¨æ¥­é¤˜æ™‚é–“ç¹¼çºŒåšé€™äº›å·¥ä½œã€‚

æˆ‘æƒ³ç‚ºå¾äº”æœˆé–‹å§‹æˆç‚º Platinum Sponsor çš„ [NuxtLabs](https://nuxtjs.org/) ä»¥åŠæ‰€æœ‰è´ŠåŠ©è€…å¤§è²å‘¼å–Š ğŸ™Œï¼Œé€™å¾ˆå¤§ç¨‹åº¦åœ°ä¿è­‰äº†æˆ‘åœ¨å®Œæˆ 1.0 ä¹‹å¾Œä»ç„¶èƒ½å¤ ç¹¼çºŒç¶­è­· Volar ä»¥æ”¹å–„ä½ çš„ Vue é–‹ç™¼é«”é©—ï¼

<p align="center">
  <a href="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/sponsors.svg">
    <img src="https://cdn.jsdelivr.net/gh/johnsoncodehk/sponsors/sponsors.svg"/>
  </a>
</p>

æ„Ÿè¬ä½ é–±è®€é€™ç¯‡æ–‡ç« ï¼
